<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <title>Final User Survey</title>
    <style>
        h1 {
            text-align: center;
            /* Center-align the title */
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column; /* Center content vertically */
            align-items: center; /* Center content horizontally */
            height: 100vh; /* Ensure the content takes the full viewport height */
            margin: 0; /* Remove default body margin */
            background-color: #f7f7f7;
        }

        .container {
            text-align: left;
            margin: 30px 0;
            border: 2px solid #22f;
            /* Frame border */
            border-radius: 10px;
            width: 80%;
            /* Centered content container width */
            max-width: 700px;
            /* Limit the maximum width for better readability */
            text-align: center;
            /* Center-align the container content */
        }

        .question {
            margin: 20px 0;
            /* Increase margin to add more space between questions */
            text-align: left;
            /* Align the question text to the left */
        }

        .question-label {
            font-size: 1.5rem;
            font-weight: bold;
            /* Make the question label bold */
        }

        .question-options {
            display: flex;
            align-items: center;
            /* Center align options horizontally */
            margin: 10px;
            text-align: center;
            /* Center-align options */
        }

        .options {
            display: flex;
            flex-direction: column;
            /* Display label and input vertically */
            margin-right: 20px;
            /* Add space between options */
            width: 20%;
            height: 75px;
            justify-content: end;
        }

        .option-label {
            text-align: center;
            margin-bottom: 5px;
        }

        .text-box {
            width: 100%;
            /* Make text boxes take full width */
            padding: 5px;
        }

        .task-button {
            background-color: #ffffff;
            color: black;
            border: 2px solid #000;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
        }

        .task-group {
            border: 2px solid #aaf;
            /* Frame border */
            border-radius: 10px;
            padding: 20px;
            /* Add padding for spacing */
            margin-bottom: 20px;
            /* Add margin to separate question groups */
        }
    </style>
    </style>
</head>

<body>
    <div class="container">
        <h1>Final User Survey</h1>
        <p>Please carefully and thoughtfully complete all of the following questions.<br><br><b>You will NOT be
                penalized for answering honestly; please answer truthfully for the integrity of our data.</b></p>
        <form id="preference-form" action="{{ url_for('final_survey_submit') }}" method="POST" onsubmit="return validateForm()">
            
        <div style="background-color:#e2e2f5;">
            <h2>Test preparedness</h2>
            <!-- Question Satisfaction Outcome 1 -->
            
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q11">The practice section as a whole prepared me well for the test section.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q11" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q11" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q11" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q11" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q11" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q11" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q11" value="7">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Satisfaction Outcome 2 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q12">I was well equipped to tackle the test section after completing the practice section.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q12" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q12" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q12" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q12" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q12" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q12" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q12" value="7">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Satisfaction Outcome 3 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q13">Without the practice section as a whole, I would have performed worse in the test section.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q13" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q13" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q13" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q13" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q13" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q13" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q13" value="7">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Attention Check 2 -->
        <div class="task-group">
            <div class="question">
                <label class="question-label" for="q42">I played as the black pieces for every puzzle.</label>
                <div class="question-options">
                    <div class="options">
                        <label class="option-label">Strongly disagree</label>
                        <input type="radio" name="q42" value="1">
                    </div>
                    <div class="options">
                        <label class="option-label">Disagree</label>
                        <input type="radio" name="q42" value="2">
                    </div>
                    <div class="options">
                        <label class="option-label">Somewhat disagree</label>
                        <input type="radio" name="q42" value="3">
                    </div>
                    <div class="options">
                        <label class="option-label">Neutral</label>
                        <input type="radio" name="q42" value="4">
                    </div>
                    <div class="options">
                        <label class="option-label">Somewhat agree</label>
                        <input type="radio" name="q42" value="5">
                    </div>
                    <div class="options">
                        <label class="option-label">Agree</label>
                        <input type="radio" name="q42" value="6">
                    </div>
                    <div class="options">
                        <label class="option-label">Strongly agree</label>
                        <input type="radio" name="q42" value="7">
                    </div>
                </div>
            </div>
        </div>

        <div style="background-color:#f5e2e2;">
            <h2>Agent satisfaction</h2>
            <!-- Question Satisfaction Agent/Explanations 1 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q21">I was satisfied with the AI agent during the practice section.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q21" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q21" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q21" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q21" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q21" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q21" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q21" value="7">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Satisfaction Agent/Explanations 2 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q22">I enjoyed the AI agent better in the practice section than in the test section.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q22" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q22" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q22" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q22" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q22" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q22" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q22" value="7">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Satisfaction Agent/Explanations 3 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q23">I found the collaboration with the AI agent in the practice section to be satisfactory.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q23" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q23" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q23" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q23" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q23" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q23" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q23" value="7">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Attention Check 1 -->
        <div class="task-group">
            <div class="question">
                <label class="question-label" for="q41">I am currently participating in a study about
                    explanations. Please select "strongly agree".</label>
                <div class="question-options">
                    <div class="options">
                        <label class="option-label">Strongly disagree</label>
                        <input type="radio" name="q41" value="1">
                    </div>
                    <div class="options">
                        <label class="option-label">Disagree</label>
                        <input type="radio" name="q41" value="2">
                    </div>
                    <div class="options">
                        <label class="option-label">Somewhat disagree</label>
                        <input type="radio" name="q41" value="3">
                    </div>
                    <div class="options">
                        <label class="option-label">Neutral</label>
                        <input type="radio" name="q41" value="4">
                    </div>
                    <div class="options">
                        <label class="option-label">Somewhat agree</label>
                        <input type="radio" name="q41" value="5">
                    </div>
                    <div class="options">
                        <label class="option-label">Agree</label>
                        <input type="radio" name="q41" value="6">
                    </div>
                    <div class="options">
                        <label class="option-label">Strongly agree</label>
                        <input type="radio" name="q41" value="7">
                    </div>
                </div>
            </div>
        </div>

        {% if protocol != "none" %}
        <div style="background-color:#e2f5e2;">
            <h2>Explanation effectiveness</h2>
            <!-- Question Explanatory Power 1 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q31">The agent's explanations (blue messages) helped me understand the puzzles better.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q31" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q31" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q31" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q31" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q31" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q31" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q31" value="7">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Explanatory Power 2 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q32">Without the agent's explanations (blue messages), the puzzles would have been tougher.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q32" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q32" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q32" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q32" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q32" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q32" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q32" value="7">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question Explanatory Power 3 -->
            <div class="task-group">
                <div class="question">
                    <label class="question-label" for="q33">The explanations (blue messages) from the agent gave me helpful insight to solve future puzzles.</label>
                    <div class="question-options">
                        <div class="options">
                            <label class="option-label">Strongly disagree</label>
                            <input type="radio" name="q33" value="1">
                        </div>
                        <div class="options">
                            <label class="option-label">Disagree</label>
                            <input type="radio" name="q33" value="2">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat disagree</label>
                            <input type="radio" name="q33" value="3">
                        </div>
                        <div class="options">
                            <label class="option-label">Neutral</label>
                            <input type="radio" name="q33" value="4">
                        </div>
                        <div class="options">
                            <label class="option-label">Somewhat agree</label>
                            <input type="radio" name="q33" value="5">
                        </div>
                        <div class="options">
                            <label class="option-label">Agree</label>
                            <input type="radio" name="q33" value="6">
                        </div>
                        <div class="options">
                            <label class="option-label">Strongly agree</label>
                            <input type="radio" name="q33" value="7">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <button type="submit" class="button">Submit</button>
        </form>
    </div>
    <script>
        function validateForm() {
            // Get all radio buttons with the name "qi" where i is the question number
            for (let i = 1; i <= 4; i++) {
                if ({{ protocol|tojson }} == "none" && i == 3) continue
                let k_max = i < 4 ? 3 : 2;
                for (let k = 1; k <= k_max; k++) {
                    let radios = document.getElementsByName("q" + i + k);
                    let formValid = false;
                    let j = 0;
                    while (!formValid && j < radios.length) {
                        if (radios[j].checked) formValid = true;
                        j++;
                    }
                    if (!formValid) {
                        alert("Please answer all questions before submitting.");
                        return false; // Prevent form submission
                    }
                }
            }

            // If all questions are answered, allow form submission
            return true;
        }
    </script>
</body>

</html>